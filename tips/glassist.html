<!DOCTYPE html>





<html lang="ja">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    GLAssistの差分自動導入
  
 | Hex bms</title>



<link rel="stylesheet" href="/book.min.c7ca503dc0eee7cd65c70aa8921cddb4c95acea2bc44854107f47be0f9f8d755.css">





<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  
  <a href="http://bms.hexlataia.xyz/">Hex bms</a>
</h2>




    

  






  <ul>
  
    

  <li  >
    
      <span>
  
    
    
    難易度表
  
</span>
    

    

  <ul>
    
    
    <li >
      

  <a href="/tables/hexajoy.html" >
    
  
    
    Hexajoy
  

  </a>


    </li>
    
    <li >
      

  <a href="/tables/tanosi.html" >
    
  
    
    ジャパリパーク
  

  </a>


    </li>
    
    <li >
      

  <a href="/tables/sandbox.html" >
    
  
    
    砂場
  

  </a>


    </li>
    
    <li  class="nazo" >
      

  <a href="/tables/hinanjoy.html" >
    
  
    
    避難Joy
  

  </a>


    </li>
    
    <li  class="nazo" >
      

  <a href="/tables/olduploader.html" >
    
  
    
    旧アプロダ表
  

  </a>


    </li>
    
    <li  class="nazo" >
      

  <a href="/tables/db.html" >
    
  
    
    発狂難易度データベース（仮）
  

  </a>


    </li>
    
    <li  class="nazo" >
      

  <a href="/tables/convert/" >
    
  
    
    いろいろ勝手にjson化したい
  

  </a>


    </li>
    
  </ul>


  </li>


  
    

  <li  >
    
      <span>
  
    
    
    メモ
  
</span>
    

    

  <ul>
    
    
    <li >
      

  <a href="/tips/googleapps.html" >
    
  
    
    スプレッドシートを使った難易度表の管理
  

  </a>


    </li>
    
    <li >
      

  <a href="/tips/glassist.html"  class="active">
    
  
    
    GLAssistの差分自動導入
  

  </a>


    </li>
    
    <li >
      

  <a href="/tips/customfolder.html" >
    
  
    
    カスタムフォルダのメモ
  

  </a>


    </li>
    
  </ul>


  </li>


  
    

  <li  >
    
      <span>
  
    
    
    スキン
  
</span>
    

    

  <ul>
    
    
    <li >
      

  <a href="/skin/editorskin.html" >
    
  
    
    BMSエディタ用スキン
  

  </a>


    </li>
    
    <li >
      

  <a href="/skin/viewerskin.html" >
    
  
    
    BMSビューア用スキン
  

  </a>


    </li>
    
  </ul>


  </li>


  
  </ul>











</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    GLAssistの差分自動導入
  
</strong>
</header>

      
<article class="markdown">

<h1 id="glassistの差分自動導入を難易度表に実装する">GLAssistの差分自動導入を難易度表に実装する</h1>

<h2 id="glassistの差分自動導入">GLAssistの差分自動導入</h2>

<p>↓これについての話がどこにもなかったのでメモ</p>

<p><img src="/tips/img/diffbutton.png" alt="" /></p>

<p>このボタンを押すことで、表内の本体は持っているが差分は未所持の譜面を自動でダウンロード、インストールしてくれる機能。</p>

<p>自動でダウンロードしてくれるのは差分のみで、本体のダウンロードは行われない。</p>

<h2 id="難易度表に導入する">難易度表に導入する</h2>

<p>難易度表のデータ部に以下の項目を導入する。</p>

<table>
<thead>
<tr>
<th>key</th>
<th>value</th>
<th>説明</th>
</tr>
</thead>

<tbody>
<tr>
<td>org_md5</td>
<td>同梱譜面のmd5ハッシュ値</td>
<td>同梱譜面のmd5ハッシュ値を指定する。ここで指定したmd5の譜面を所持していると差分自動導入が可能になり、この譜面のあるフォルダに差分がインストールされる。</td>
</tr>

<tr>
<td>url_diff</td>
<td>差分のダウンロードURL</td>
<td>差分のダウンロードURLを指定する。</td>
</tr>
</tbody>
</table>

<h3 id="url-diff-の注意点">url_diff の注意点</h3>

<p><strong>差分のダウンロードURLは以下の条件をすべて満たす必要がある。</strong></p>

<ul>
<li>譜面ファイル(bmeなど)またはそのアーカイブ(zipなど)への直リンクである</li>

<li><p>GETリクエストに対してファイルが返ってくる</p>

<ul>
<li>たとえば GoogleDrive (export=download を付けたものも含む) や、Internet Archive は使用できない</li>
<li>それ以外の直リンクっぽいものは基本問題ないと思われる</li>
</ul></li>

<li><p>URLの末尾が &ldquo;/ファイル名&rdquo; となっている</p>

<ul>
<li>たとえば <strong>&ldquo;http://xxxxxxxx.com/sabun.zip&rdquo;</strong> こんなURLは使用できる</li>
<li>差分アップローダーなどの <strong>&ldquo;http://xxxxxxxx.com/upload.cgi?get=00001&rdquo;</strong> こんなURLは使用できない</li>
<li>ただし、以下のようにダミーのパラメータをつけることで無理やり対応させることもできる &ldquo;http://xxxxxxxx.com/upload.cgi?get=00001<strong>&amp;/00001.zip</strong>&ldquo;</li>
</ul></li>
</ul>

<p>まとめると、</p>

<p>以下のようなURLの場合は問題なく使用できる。</p>

<ul>
<li>http://xxxxxxxx.com/sabun.zip</li>
</ul>

<p>パラメータがつくURLの場合は最後にダミーのパラメータをつけることで無理やり対応させることができる。</p>

<ul>
<li>http://xxxxxxxx.com/upload.cgi?get=00001</li>
<li>http://xxxxxxxx.com/upload.cgi?get=00001<strong>&amp;/00001.zip</strong></li>
</ul>

<p>Dropboxの場合は共有リンクを以下のように変更することで使用できる。</p>

<ul>
<li>https://<strong>www.dropbox.com</strong>/s/xxxxxxxxxxxxxxx/sabun.zip<strong>?dl=0</strong></li>
<li>https://<strong>dl.dropboxusercontent.com</strong>/s/xxxxxxxxxxxxxxx/sabun.zip</li>
</ul>

<p>GoogleDriveにアップロードされている差分は自動導入を使用できない。</p>

<h2 id="実際に使用する">実際に使用する</h2>

<p>org_md5 の譜面を所持していてかつ、差分は未所持の差分が1つでも存在する場合、差分自動導入のボタンがクリック可能になる。</p>

<p><img src="/tips/img/gla_button.png" alt="" /></p>

<p>クリックすると自動導入が始まる。url_diffのファイルをダウンロードし、GLAssistの楽曲導入機能を通じて差分がインストールされる。自動導入中は以下のような画面になるのみで、進行状況などは表示されない。</p>

<p><img src="/tips/img/guruguru.png" alt="" /></p>

<p>完了。</p>

<p><img src="/tips/img/gla_diff_end.png" alt="" /></p>

<p>差分導入タブに移動すると自動導入の結果が表示される。</p>

<p>GLAssistの楽曲導入機能を使用するため、この機能に対応していない形式の差分は導入に失敗する。(以下の x-Aria -frenzy mix- [Hexagon] 等)</p>

<p><img src="/tips/img/gla_import_result.png" alt="" /></p>

<p>難易度表タブに戻り表を更新すると差分の導入に成功していることが分かる。</p>

<p><img src="/tips/img/gla_end.png" alt="" /></p>

<h2 id="まとめ">まとめ</h2>

<p>本体を持っていれば差分の導入が楽になる。</p>

<p>現在はBeMusicSeekerに直リンクの本体、差分を自動インストールする機能があるのでそっちで十分かも。</p>
</article>

      

<div class="book-footer justify-between">
  
  <div>
    
    
      <img src="/svg/calendar.svg" alt="Changed" /> 2019-6-27
    
  </div>
  
  
</div>


      
    </div>

    
  

  
    <aside class="book-toc level-6 fixed">
      <nav id="TableOfContents">
<ul>
<li><a href="#glassistの差分自動導入を難易度表に実装する">GLAssistの差分自動導入を難易度表に実装する</a>
<ul>
<li><a href="#glassistの差分自動導入">GLAssistの差分自動導入</a></li>
<li><a href="#難易度表に導入する">難易度表に導入する</a>
<ul>
<li><a href="#url-diff-の注意点">url_diff の注意点</a></li>
</ul></li>
<li><a href="#実際に使用する">実際に使用する</a></li>
<li><a href="#まとめ">まとめ</a></li>
</ul></li>
</ul>
</nav>
    </aside>
  



  </main>
  
  
  
</body>

</html>
